/* =========================
   Ratio Estimator - Figma Design System
   ========================= */

/* CSS Layers for better cascade management */
@layer reset, tokens, base, components, utilities, themes, animations;

/* Custom Media Queries (Future feature - commented for now) */
/* 
@custom-media --mobile (max-width: 48rem);
@custom-media --tablet (min-width: 48rem) and (max-width: 64rem);  
@custom-media --desktop (min-width: 64rem);
@custom-media --reduced-motion (prefers-reduced-motion: reduce);
@custom-media --high-contrast (prefers-contrast: high);
*/

/* Performance and UX optimizations */
@layer base {
  html {
    /* Smooth scrolling for better UX */
    scroll-behavior: smooth;
    /* Better text rendering */
    text-rendering: optimizelegibility;
    /* Improved font rendering on macOS */
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  /* Performance optimization for animated elements */
  .section,
  .btn,
  .modal {
    /* Hint browser about potential transforms */
    will-change: transform;
  }

  /* Layout containment for better performance */
  .section {
    contain: layout style;
  }

  .modal-backdrop {
    contain: layout;
  }
}

/* --- Design System Tokens --- */
@layer tokens {
  :root {
    /* Figma Design System Colors */
    --white: #ffffff;
    --canvas-light: #faf8f5; /* Light Beige */
    --canvas-dark: #333333; /* Dark Gray */

    /* Primary Green */
    --primary-green: #2e7d32;
    --primary-green-hover: #1b5e20;

    /* Success Green */
    --success-green: #388e3c;
    --success-green-hover: #2e7d32;

    /* Dark Gray */
    --dark-gray: #333333;
    --dark-gray-light: #555555;
    --dark-gray-lighter: #666666;

    /* Soft Gray */
    --soft-gray: #e0e0e0;
    --soft-gray-dark: #cccccc;

    /* Error Red */
    --error-red: #d32f2f;
    --error-red-hover: #b71c1c;

    /* Text colors */
    --text-primary: #333333;
    --text-secondary: #666666;
    --text-muted: #999999;
    --text-primary-dark: #ffffff;
    --text-secondary-dark: #cccccc;

    /* Background colors */
    --bg-card: #ffffff;
    --bg-card-dark: #555555;
    --bg-hover: #f5f5f5;

    /* Typography - Figma Style Guide */
    --font-size-header: 1.5rem; /* Header (24px) */
    --font-size-subheader: 1.125rem; /* Subheader (18px) */
    --font-size-body: 0.875rem; /* Body (14px) */
    --font-size-button: 0.875rem; /* Button (14px) */
    --font-size-table: 0.8125rem; /* Table Text (13px) */

    --font-weight-bold: 700;
    --font-weight-medium: 500;
    --font-weight-regular: 400;

    /* Spacing */
    --space-xs: 0.25rem; /* 4px */
    --space-sm: 0.5rem; /* 8px */
    --space-md: 1rem; /* 16px */
    --space-lg: 1.5rem; /* 24px */
    --space-xl: 2rem; /* 32px */

    /* Modern spacing with fluid scaling */
    --space-fluid-xs: clamp(0.125rem, 0.5vw, 0.25rem);
    --space-fluid-sm: clamp(0.25rem, 1vw, 0.5rem);
    --space-fluid-md: clamp(0.5rem, 2vw, 1rem);
    --space-fluid-lg: clamp(1rem, 3vw, 1.5rem);
    --space-fluid-xl: clamp(1.5rem, 4vw, 2rem);

    /* Border radius */
    --radius-sm: 0.25rem; /* 4px */
    --radius-md: 0.5rem; /* 8px */
    --radius-lg: 0.75rem; /* 12px */
    --radius-pill: 62.4375rem; /* 999px */

    /* Shadows */
    --shadow-sm: 0 0.0625rem 0.1875rem rgba(0, 0, 0, 0.1); /* 0 1px 3px */
    --shadow-md: 0 0.25rem 0.375rem rgba(0, 0, 0, 0.1); /* 0 4px 6px */
    --shadow-sm-dark: 0 0.0625rem 0.1875rem rgba(0, 0, 0, 0.3); /* 0 1px 3px */
    --shadow-md-dark: 0 0.25rem 0.375rem rgba(0, 0, 0, 0.3); /* 0 4px 6px */

    /* Focus */
    --focus-ring: 0.125rem solid var(--primary-green); /* 2px */
    --focus-offset: 0.125rem; /* 2px */

    /* Artist Mode Cursors */
    --artist-brush-cursor: url("data:image/svg+xml;charset=utf8,%3Csvg xmlns='http://www.w3.org/2000/svg' width='35' height='52' viewBox='0 0 69 103' fill='none'%3E%3Cpath d='M16.3233 7.57656L9.06567 12.0874C7.51167 8.19816 5.75607 5.01456 3.32007 1.76376C8.26767 1.20096 13.4337 3.53616 16.3233 7.57656Z' fill='white' stroke='black' stroke-width='3' stroke-miterlimit='10' stroke-linecap='round'/%3E%3Cpath d='M66.0932 94.3648C64.262 97.3552 60.5156 97.1536 56.8952 97.1788C48.6212 97.246 41.9432 91.618 41.9432 91.618C41.9432 91.618 42.8336 96.2296 43.85 98.4052C38.6084 94.9024 33.686 90.9292 29.1416 86.5612C29.5028 89.1064 29.864 91.6432 30.2252 94.1884C23.0012 87.3676 15.6176 80.2696 10.04 71.9872C7.7048 68.518 5.924 65.3848 5.462 61.21C4.8824 56.0272 4.7648 50.7856 5.1176 45.586C5.4788 40.252 6.9908 34.0444 13.7192 34.0108C13.9544 34.0108 14.1644 34.0108 14.366 34.0108L34.778 33.1372C37.676 33.448 40.4732 34.5652 42.7832 36.3376C47.5376 35.5816 52.586 37.4716 56.1308 40.7392C59.6672 43.9984 61.9268 48.4672 63.2792 53.0872C64.6232 57.7072 65.1272 62.5372 65.6312 67.3252C66.0932 71.8024 66.5552 76.2964 67.0172 80.7736C67.4204 84.6376 68.126 91.0552 66.0932 94.3648Z' fill='white' stroke='black' stroke-width='3' stroke-miterlimit='10' stroke-linecap='round'/%3E%3Cpath d='M14.3662 34.0031C17.113 33.9779 17.6338 33.9359 20.7166 34.3727' stroke='black' stroke-width='3' stroke-miterlimit='10' stroke-linecap='round'/%3E%3Cpath d='M42.7832 36.3296C43.2032 36.6488 43.6148 36.9848 43.9928 37.3544C46.6136 39.8156 48.3608 43.184 48.8648 46.7372' stroke='black' stroke-width='3' stroke-miterlimit='10' stroke-linecap='round'/%3E%3Cpath d='M34.7865 33.129C34.6353 33.1038 34.4841 33.0954 34.3413 33.0786' stroke='black' stroke-width='3' stroke-miterlimit='10' stroke-linecap='round'/%3E%3Cpath d='M20.4392 63.7051C20.2628 59.6479 20.456 58.6231 20.54 55.9855L16.4576 57.6739C17.5832 53.8267 17.936 46.5691 17.1632 42.6043C16.466 38.9755 15.7436 37.4635 14.3744 34.0111C14.0132 33.0787 13.6268 32.1463 13.2236 31.2307C11.6192 27.5599 10.1828 23.8051 9.12441 19.9411C8.21721 16.6483 7.69641 11.4151 10.3172 8.59265C10.8296 8.03825 11.468 7.57625 12.2492 7.24025C13.61 6.66065 14.9036 6.49265 16.1132 6.63545C18.7088 6.93785 20.96 8.64305 22.766 10.7767C28.352 17.3455 32.4008 24.9643 34.7864 33.1375C35.9372 37.0687 37.3988 40.4119 37.76 44.5447' fill='white'/%3E%3Cpath d='M20.4392 63.7051C20.2628 59.6479 20.456 58.6231 20.54 55.9855L16.4576 57.6739C17.5832 53.8267 17.936 46.5691 17.1632 42.6043C16.466 38.9755 15.7436 37.4635 14.3744 34.0111C14.0132 33.0787 13.6268 32.1463 13.2236 31.2307C11.6192 27.5599 10.1828 23.8051 9.12441 19.9411C8.21721 16.6483 7.69641 11.4151 10.3172 8.59265C10.8296 8.03825 11.468 7.57625 12.2492 7.24025C13.61 6.66065 14.9036 6.49265 16.1132 6.63545C18.7088 6.93785 20.96 8.64305 22.766 10.7767C28.352 17.3455 32.4008 24.9643 34.7864 33.1375C35.9372 37.0687 37.3988 40.4119 37.76 44.5447' stroke='black' stroke-width='3' stroke-miterlimit='10' stroke-linecap='round'/%3E%3C/svg%3E")
      10 5;

    /* Common values */
    --font-family-system: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
    --transition-fast: all 0.2s ease;
    --transition-normal: all 0.3s ease;
    --max-width-container: 75rem; /* 1200px */
    --z-index-modal: 1000;
    --z-index-toggle: 100;
    --z-index-icon: 10;
    --z-index-overlay: 1;

    /* Alpha colors */
    --error-bg: rgba(211, 47, 47, 0.1);
    --modal-backdrop: rgba(0, 0, 0, 0.5);
    --drop-shadow-light: rgba(0, 0, 0, 0.1);
    --drop-shadow-dark: rgba(0, 0, 0, 0.3);
    --artist-shadow-color: rgba(44, 62, 80, 0.2);
    --artist-shadow-color-strong: rgba(44, 62, 80, 0.4);

    /* Artist mode values */
    --artist-border-width: 0.125rem; /* 2px */
    --artist-border-style: solid;
    --artist-rotate-slight: -0.3deg;
    --artist-rotate-slight-alt: 0.3deg;
    --artist-rotate-small: -0.5deg;
    --artist-rotate-small-alt: 0.5deg;
    --artist-rotate-medium: -1deg;
    --artist-rotate-large: -5deg;
    --artist-rotate-large-alt: 5deg;

    /* Button sizes */
    --btn-size-circular: 2.25rem; /* 36px */
    --btn-min-height: 2.5rem; /* 40px */
    --btn-padding-standard: 0.625rem 1.25rem; /* 10px 20px */
    --btn-padding-ghost: var(--space-sm) var(--space-lg);
    --btn-font-size-mobile: 0.75rem; /* 12px */
    --btn-padding-mobile: 0.5rem 1rem; /* 8px 16px */

    /* Modern color space support */
    @supports (color: oklch(0.7 0.15 180)) {
      --primary-green: oklch(0.45 0.15 140);
      --success-green: oklch(0.5 0.15 140);
      --error-red: oklch(0.55 0.2 25);
    }

    /* Container query units for responsive components */
    --container-xs: 20cqw;
    --container-sm: 30cqw;
    --container-md: 50cqw;
    --container-lg: 70cqw;
  }
} /* End @layer tokens */

/* Themes are now handled in themes.less */

@layer base {
  /* =========================
   Base Styles
   ========================= */

  * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
  }

  body {
    font-family: var(--font-family-system);
    font-size: var(--font-size-body);
    font-weight: var(--font-weight-regular);
    color: var(--text-primary);
    background-color: var(--canvas);
    line-height: 1.5;
    transition:
      background-color 0.3s ease,
      color 0.3s ease;
  }

  .app {
    max-width: var(--max-width-container);
    margin: 0 auto;
    padding: var(--space-lg);
    min-height: 100vh;
    display: flex;
    flex-direction: column;
  }
} /* End @layer base */

@layer components {
  /* =========================
   Header
   ========================= */

  header {
    margin-bottom: var(--space-xl);
  }

  header h1 {
    font-size: var(--font-size-header);
    font-weight: var(--font-weight-bold);
    color: var(--primary-green);
    margin: 0;
  }

  /* =========================
   Main Content Sections
   ========================= */

  main {
    flex: 1;
    display: flex;
    flex-direction: column;
    gap: var(--space-xl);
  }

  .section {
    background: var(--bg-card);
    border: 0.0625rem solid var(--border-color); /* 1px */
    border-radius: var(--radius-lg);
    padding: var(--space-lg);
    box-shadow: var(--current-shadow-sm);
    transition: var(--transition-normal);
  }

  .section-title {
    font-size: var(--font-size-subheader);
    font-weight: var(--font-weight-medium);
    color: var(--primary-green);
    margin-bottom: var(--space-md);
  }

  /* =========================
   Current Prompt Section
   ========================= */

  .prompt-text {
    color: var(--text-secondary);
    line-height: 1.6;
  }

  /* =========================
   Upload Section
   ========================= */

  .upload-form {
    display: flex;
    flex-direction: column;
    gap: var(--space-md);
  }

  .file-controls {
    display: flex;
    align-items: center;
    gap: var(--space-md);
    flex-wrap: wrap;
  }

  .visually-hidden {
    position: absolute !important;
    width: 0.0625rem; /* 1px */
    height: 0.0625rem; /* 1px */
    padding: 0;
    margin: -0.0625rem; /* -1px */
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border: 0;
  }

  .file-name {
    color: var(--text-secondary);
    flex: 1;
    min-width: 12.5rem; /* 200px */
  }

  .hint {
    color: var(--text-muted);
    font-size: 0.75rem; /* 12px */
  }

  .error {
    color: var(--error-red);
    font-size: 0.75rem; /* 12px */
    padding: var(--space-sm);
    background: var(--error-bg);
    border-radius: var(--radius-sm);
    border-left: 0.1875rem solid var(--error-red); /* 3px */
  }

  /* =========================
   Form Enhancements
   ========================= */

  /* Modern form field sizing */
  @supports (field-sizing: content) {
    input,
    textarea,
    select {
      field-sizing: content;
    }
  }

  /* Better text wrapping */
  @supports (text-wrap: balance) {
    h1,
    h2,
    h3 {
      text-wrap: balance;
    }
  }

  @supports (text-wrap: pretty) {
    p {
      text-wrap: pretty;
    }
  }

  /* Form validation styling */
  input:user-invalid {
    border-color: var(--error-red);
    box-shadow: 0 0 0 0.125rem color-mix(in srgb, var(--error-red) 20%, transparent);
  }

  input:user-valid {
    border-color: var(--success-green);
  }

  /* =========================
   Buttons
   ========================= */

  .btn {
    font-size: var(--font-size-button);
    font-weight: var(--font-weight-medium);
    padding: var(--btn-padding-standard);
    border: none;
    border-radius: var(--radius-pill);
    cursor: pointer;
    transition: var(--transition-fast);
    display: inline-flex;
    align-items: center;
    justify-content: center;
    min-height: var(--btn-min-height);
    text-decoration: none;
  }

  .btn:focus-visible {
    outline: var(--focus-ring);
    outline-offset: var(--focus-offset);
  }

  .btn:disabled {
    opacity: 0.6;
    cursor: not-allowed;
  }

  /* Primary Button (Choose CSV) */
  .btn.file-btn {
    background-color: var(--primary-green);
    color: var(--white);
  }

  .btn.file-btn:hover:not(:disabled) {
    background-color: var(--primary-green-hover);
  }

  /* Secondary Button (Submit) */
  .btn.primary {
    background-color: var(--dark-gray);
    color: var(--white);
  }

  .btn.primary:hover:not(:disabled) {
    background-color: var(--dark-gray-light);
  }

  /* Circular Button Base */
  .btn.circular {
    width: var(--btn-size-circular);
    height: var(--btn-size-circular);
    padding: 0;
    border-radius: 50%;
    font-size: 1.125rem; /* 18px */
    font-weight: var(--font-weight-bold);
  }

  /* Approve Button */
  .btn.approve {
    background-color: var(--success-green);
    color: var(--white);
  }

  .btn.approve:hover:not(:disabled) {
    background-color: var(--success-green-hover);
  }

  /* Reject Button */
  .btn.reject {
    background-color: var(--error-red);
    color: var(--white);
  }

  .btn.reject:hover:not(:disabled) {
    background-color: var(--error-red-hover);
  }

  /* Modal buttons */
  .btn.ghost {
    background-color: transparent;
    color: var(--text-primary);
    border: 0.0625rem solid var(--soft-gray); /* 1px */
    border-radius: var(--radius-md);
    padding: var(--btn-padding-ghost);
    font-weight: var(--font-weight-medium);
    width: auto;
    height: auto;
    min-height: var(--btn-min-height);
    font-size: var(--font-size-button);
  }

  .btn.ghost:hover {
    background-color: var(--bg-hover);
  }

  [data-theme='dark'] .btn.ghost {
    border-color: var(--dark-gray-light);
    color: var(--text-primary-dark);
  }

  [data-theme='dark'] .btn.ghost:hover {
    background-color: var(--dark-gray-light);
  }

  .btn.reject.solid {
    background-color: var(--error-red);
    color: var(--white);
    border: none;
    border-radius: var(--radius-md);
    padding: var(--btn-padding-ghost);
    font-weight: var(--font-weight-medium);
    width: auto;
    height: auto;
    min-height: var(--btn-min-height);
    font-size: var(--font-size-button);
  }

  .btn.reject.solid:hover:not(:disabled) {
    background-color: var(--error-red-hover);
  }

  /* =========================
   Search Container
   ========================= */

  .search-container {
    margin-bottom: var(--space-lg);
    position: relative;
  }

  .search-input {
    width: 100%;
    padding: 0.75rem 1.25rem 0.75rem 2.8125rem; /* 12px 20px 12px 45px */
    border: 0.0625rem solid var(--border-color); /* 1px */
    border-radius: var(--radius-md);
    font-family: var(--font-family-system);
    font-size: var(--font-size-body);
    background: var(--bg-card);
    color: var(--text-primary);
    transition: var(--transition-fast);
  }

  .search-input:focus {
    outline: var(--focus-ring);
    outline-offset: var(--focus-offset);
    border-color: var(--primary-green);
  }

  .search-input::placeholder {
    color: var(--text-muted);
  }

  .search-container::before {
    content: '🔍';
    position: absolute;
    left: 0.9375rem; /* 15px */
    top: 50%;
    transform: translateY(-50%);
    font-size: 1rem; /* 16px */
    z-index: var(--z-index-overlay);
    color: var(--text-muted);
  }

  /* =========================
   Review Table
   ========================= */

  .review-table {
    width: 100%;
    border-collapse: collapse;
    margin-top: var(--space-md);
    table-layout: fixed; /* Ensures consistent column widths */
  }

  /* Column width distribution for better layout */
  .review-table th:nth-child(1),
  .review-table td:nth-child(1) {
    width: 25%; /* Test Name */
  }

  .review-table th:nth-child(2),
  .review-table td:nth-child(2) {
    width: 15%; /* Test Ratio */
  }

  .review-table th:nth-child(3),
  .review-table td:nth-child(3) {
    width: 45%; /* Test Reasoning */
  }

  .review-table th:nth-child(4),
  .review-table td:nth-child(4) {
    width: 15%; /* Test Approval (Actions) */
  }

  .review-table th,
  .review-table td {
    padding: var(--space-md);
    text-align: left;
    border-bottom: 0.0625rem solid var(--table-border); /* 1px */
    position: relative; /* Enable absolute positioning for child elements */
  }

  /* Allow tooltips to extend outside table cells */
  .review-table tbody tr {
    position: relative;
  }

  .review-table tbody tr td:first-child {
    overflow: visible; /* Allow tooltip overflow */
  }

  .review-table th {
    font-size: var(--font-size-table);
    font-weight: var(--font-weight-medium);
    color: var(--text-secondary);
    background-color: var(--table-header-bg);
  }

  .review-table td {
    font-size: var(--font-size-table);
    color: var(--text-primary);
  }

  .review-table .actions {
    text-align: center;
    white-space: nowrap;
  }

  .review-table .actions .btn {
    margin: 0 var(--space-xs);
    transition: all 0.3s ease;
    position: relative;
    overflow: hidden;
  }

  /* Button state styling */
  .btn.circular.approve.active {
    background: var(--success-green);
    color: white;
    border-color: var(--success-green);
    transform: scale(1.1);
    box-shadow: 0 0.125rem 0.5rem rgba(56, 142, 60, 0.4);
  }

  .btn.circular.reject.active {
    background: var(--error-red);
    color: white;
    border-color: var(--error-red);
    transform: scale(1.1);
    box-shadow: 0 0.125rem 0.5rem rgba(211, 47, 47, 0.4);
  }

  .btn.circular:disabled {
    opacity: 0.3;
    cursor: not-allowed;
    transform: scale(0.9);
  }

  .btn.circular:disabled:hover {
    transform: scale(0.9);
  }

  /* Row state styling */
  .row-approved {
    background: rgba(56, 142, 60, 0.05) !important;
    border-left: 0.25rem solid var(--success-green);
  }

  .row-rejected {
    background: rgba(211, 47, 47, 0.05) !important;
    border-left: 0.25rem solid var(--error-red);
    opacity: 0.7;
  }

  .row-pending {
    transition: background-color 0.3s ease;
  }

  /* Success animation for approve button */
  .btn.circular.approve.active::after {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 0;
    height: 0;
    background: rgba(255, 255, 255, 0.3);
    border-radius: 50%;
    transform: translate(-50%, -50%);
    animation: ripple 0.6s ease-out;
  }

  @keyframes ripple {
    0% {
      width: 0;
      height: 0;
      opacity: 1;
    }
    100% {
      width: 2rem;
      height: 2rem;
      opacity: 0;
    }
  }

  /* =========================
   Review Header & Stats
   ========================= */

  .review-header {
    display: flex;
    flex-direction: column;
    gap: var(--space-md);
    margin-bottom: var(--space-lg);
  }

  .review-stats {
    display: flex;
    justify-content: space-between;
    align-items: center;
    flex-wrap: wrap;
    gap: var(--space-sm);
  }

  .results-count {
    font-size: var(--font-size-body);
    color: var(--text-secondary);
    font-weight: var(--font-weight-medium);
  }

  .page-info {
    font-size: var(--font-size-body);
    color: var(--text-muted);
  }

  .results-info {
    display: flex;
    flex-direction: column;
    gap: var(--space-xs);
  }

  .status-counts {
    display: flex;
    gap: var(--space-sm);
    flex-wrap: wrap;
  }

  .status-badge {
    display: inline-flex;
    align-items: center;
    padding: 0.25rem 0.5rem;
    border-radius: var(--radius-sm);
    font-size: 0.75rem; /* 12px */
    font-weight: var(--font-weight-medium);
    border: 0.0625rem solid transparent;
    transition: all 0.2s ease;
  }

  .status-badge.pending {
    background: rgba(156, 163, 175, 0.1);
    color: #6b7280;
    border-color: rgba(156, 163, 175, 0.2);
  }

  .status-badge.approved {
    background: rgba(56, 142, 60, 0.1);
    color: var(--success-green);
    border-color: rgba(56, 142, 60, 0.2);
  }

  .status-badge.rejected {
    background: rgba(211, 47, 47, 0.1);
    color: var(--error-red);
    border-color: rgba(211, 47, 47, 0.2);
  }

  /* Dark theme status badges */
  [data-theme='dark'] .status-badge.pending {
    background: rgba(156, 163, 175, 0.15);
    color: #9ca3af;
  }

  [data-theme='dark'] .status-badge.approved {
    background: rgba(76, 175, 80, 0.15);
    color: #4caf50;
  }

  [data-theme='dark'] .status-badge.rejected {
    background: rgba(244, 67, 54, 0.15);
    color: #f44336;
  }

  /* =========================
   Table Wrapper & Scrolling
   ========================= */

  .table-wrapper {
    overflow-x: auto;
    border-radius: var(--radius-md);
    border: 0.0625rem solid var(--border-color);
    /* Allow tooltips to escape container */
    position: relative;
  }

  .table-wrapper.scrollable {
    max-height: 28rem; /* 448px - shows ~10-12 rows */
    overflow-y: auto;
    scrollbar-width: thin;
    scrollbar-color: var(--primary-green) var(--soft-gray);
    /* Add padding to bottom to prevent tooltip cutoff */
    padding-bottom: 4rem;
    margin-bottom: -4rem;
  }

  .table-wrapper.scrollable::-webkit-scrollbar {
    width: 0.5rem; /* 8px */
    height: 0.5rem; /* 8px */
  }

  .table-wrapper.scrollable::-webkit-scrollbar-track {
    background: var(--soft-gray);
    border-radius: var(--radius-sm);
  }

  .table-wrapper.scrollable::-webkit-scrollbar-thumb {
    background: var(--primary-green);
    border-radius: var(--radius-sm);
  }

  .table-wrapper.scrollable::-webkit-scrollbar-thumb:hover {
    background: var(--primary-green-hover);
  }

  /* =========================
   Pagination
   ========================= */

  .pagination {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: var(--space-sm);
    margin-top: var(--space-lg);
    flex-wrap: wrap;
  }

  .pagination-btn {
    padding: var(--space-sm) var(--space-md);
    font-size: var(--font-size-body);
    border: 0.0625rem solid var(--border-color);
    background: var(--bg-card);
    color: var(--text-primary);
    border-radius: var(--radius-sm);
    transition: var(--transition-fast);
    cursor: pointer;
  }

  .pagination-btn:hover:not(:disabled) {
    background: var(--bg-hover);
    border-color: var(--primary-green);
  }

  .pagination-btn:disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }

  .page-numbers {
    display: flex;
    gap: var(--space-xs);
  }

  .pagination-number {
    width: 2.5rem; /* 40px */
    height: 2.5rem; /* 40px */
    padding: 0;
    font-size: var(--font-size-body);
    border: 0.0625rem solid var(--border-color);
    background: var(--bg-card);
    color: var(--text-primary);
    border-radius: var(--radius-sm);
    transition: var(--transition-fast);
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .pagination-number:hover {
    background: var(--bg-hover);
    border-color: var(--primary-green);
  }

  .pagination-number.active {
    background: var(--primary-green);
    color: white;
    border-color: var(--primary-green);
  }

  .pagination-number.active:hover {
    background: var(--primary-green-hover);
    border-color: var(--primary-green-hover);
  }

  /* =========================
   Empty Review State
   ========================= */

  .empty-review-state {
    opacity: 0.85;
  }

  .empty-message {
    text-align: center;
    padding: var(--space-xl) var(--space-md) !important;
    border-bottom: none !important;
  }

  .empty-content {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: var(--space-md);
    max-width: 24rem; /* 384px */
    margin: 0 auto;
  }

  .empty-icon {
    font-size: 3rem; /* 48px */
    line-height: 1;
    filter: drop-shadow(0 0.125rem 0.25rem rgba(0, 0, 0, 0.1));
  }

  .empty-content h3 {
    font-size: var(--font-size-subheader);
    font-weight: var(--font-weight-medium);
    color: var(--text-primary);
    margin: 0;
  }

  .empty-content p {
    font-size: var(--font-size-body);
    color: var(--text-secondary);
    margin: 0;
    line-height: 1.5;
  }

  /* Empty state artist mode styling now handled in themes.less */

  /* =========================
   Loading State
   ========================= */

  .loading-state {
    opacity: 1;
  }

  .loading-message {
    text-align: center;
    padding: var(--space-xl) var(--space-md) !important;
    border-bottom: none !important;
  }

  .loading-content {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: var(--space-md);
    max-width: 28rem; /* 448px */
    margin: 0 auto;
  }

  /* Animated spinner with emoji icons */
  .loading-spinner {
    display: flex;
    gap: var(--space-sm);
    animation: bounce 1.5s infinite;
  }

  .spinner-icon {
    font-size: 2rem; /* 32px */
    line-height: 1;
    animation: spin 2s linear infinite;
    filter: drop-shadow(0 0.125rem 0.25rem rgba(0, 0, 0, 0.15));
  }

  .spinner-icon:nth-child(1) {
    animation-delay: 0s;
  }

  .spinner-icon:nth-child(2) {
    animation-delay: 0.3s;
  }

  .spinner-icon:nth-child(3) {
    animation-delay: 0.6s;
  }

  .loading-content h3 {
    font-size: var(--font-size-subheader);
    font-weight: var(--font-weight-medium);
    color: var(--text-primary);
    margin: 0;
    animation: pulse 2s ease-in-out infinite;
  }

  .loading-content p {
    font-size: var(--font-size-body);
    color: var(--text-secondary);
    margin: 0;
    line-height: 1.5;
    text-align: center;
  }

  .loading-subtext {
    font-size: 0.75rem; /* 12px */
    color: var(--text-muted);
    font-style: italic;
  }

  /* Animated progress bar */
  .loading-bar {
    width: 100%;
    max-width: 16rem; /* 256px */
    height: 0.25rem; /* 4px */
    background-color: var(--soft-gray);
    border-radius: var(--radius-sm);
    overflow: hidden;
    margin-top: var(--space-sm);
  }

  .loading-progress {
    height: 100%;
    background: linear-gradient(
      90deg,
      var(--primary-green),
      var(--success-green),
      var(--primary-green)
    );
    border-radius: var(--radius-sm);
    animation: progress 5s ease-out forwards;
  }

  /* Keyframe animations */
  @keyframes spin {
    0% {
      transform: rotate(0deg) scale(1);
    }
    50% {
      transform: rotate(180deg) scale(1.1);
    }
    100% {
      transform: rotate(360deg) scale(1);
    }
  }

  @keyframes bounce {
    0%,
    20%,
    50%,
    80%,
    100% {
      transform: translateY(0);
    }
    40% {
      transform: translateY(-0.5rem);
    }
    60% {
      transform: translateY(-0.25rem);
    }
  }

  @keyframes pulse {
    0%,
    100% {
      opacity: 1;
    }
    50% {
      opacity: 0.7;
    }
  }

  @keyframes progress {
    0% {
      width: 0%;
      background-position: -200% 0;
    }
    20% {
      width: 20%;
    }
    40% {
      width: 45%;
    }
    60% {
      width: 65%;
    }
    80% {
      width: 85%;
    }
    95% {
      width: 95%;
    }
    100% {
      width: 100%;
      background-position: 200% 0;
    }
  }

  /* Loading state artist mode styling now handled in themes.less */

  /* Pagination and table wrapper artist mode styling now handled in themes.less */

  /* Button states and row states artist mode styling now handled in themes.less */

  /* Dark theme row and button states now handled in themes.less */

  /* Respect reduced motion preferences */
  @media (prefers-reduced-motion: reduce) {
    .loading-spinner,
    .spinner-icon,
    .loading-content h3 {
      animation: none;
    }

    .loading-progress {
      animation: progress-simple 5s linear forwards;
    }

    /* Disable button animations for reduced motion */
    .btn.circular,
    .btn.circular.approve.active,
    .btn.circular.reject.active,
    .row-approved,
    .row-rejected,
    .row-pending,
    /* Artist mode button animations now handled in themes.less */

    .btn.circular.approve.active::after {
      animation: none !important;
    }

    /* Disable tooltip animations for reduced motion */
    .tooltip,
    .rejection-indicator,
    .rejection-indicator:hover,
    /* Artist mode tooltip animations now handled in themes.less */

    .rejection-indicator:hover .tooltip {
      opacity: 1 !important;
      visibility: visible !important;
      /* Maintain dynamic sizing even in reduced motion */
      min-width: 12rem !important;
      max-width: clamp(20rem, 40vw, 32rem) !important;
    }

    /* Maintain edge positioning even with reduced motion */
    .tooltip-left-adjusted,
    .tooltip-right-adjusted {
      transform: none !important;
    }

    .tooltip-left-adjusted::after,
    .tooltip-right-adjusted::after {
      transform: none !important;
    }
  }

  @keyframes progress-simple {
    0% {
      width: 0%;
    }
    100% {
      width: 100%;
    }
  }

  /* =========================
   Modal
   ========================= */

  .modal-backdrop {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: var(--modal-backdrop);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: var(--z-index-modal);
    padding: var(--space-lg);
  }

  .modal {
    background: var(--bg-card);
    border-radius: var(--radius-lg);
    padding: var(--space-lg);
    box-shadow: var(--current-shadow-md);
    max-width: 25rem; /* 400px */
    width: 100%;
  }

  .modal h3 {
    font-size: var(--font-size-subheader);
    font-weight: var(--font-weight-medium);
    color: var(--text-primary);
    margin-bottom: var(--space-md);
  }

  .modal p {
    color: var(--text-secondary);
    margin-bottom: var(--space-lg);
  }

  .modal-actions {
    display: flex;
    gap: var(--space-md);
    justify-content: flex-end;
  }

  /* Enhanced reject modal styling */
  .reject-modal {
    max-width: 32rem; /* 512px - wider for form */
  }

  .reject-modal h3 {
    color: var(--error-red);
    display: flex;
    align-items: center;
    gap: var(--space-sm);
  }

  .reject-modal h3::before {
    content: '⚠️';
    font-size: 1.25rem;
  }

  /* =========================
   Form Elements in Modal
   ========================= */

  .form-group {
    margin: var(--space-lg) 0;
  }

  .form-label {
    display: block;
    font-size: var(--font-size-body);
    font-weight: var(--font-weight-medium);
    color: var(--text-primary);
    margin-bottom: var(--space-sm);
  }

  .required {
    color: var(--error-red);
    margin-left: 0.125rem;
  }

  .form-textarea {
    width: 100%;
    padding: var(--space-md);
    border: 0.0625rem solid var(--border-color);
    border-radius: var(--radius-md);
    font-family: inherit;
    font-size: var(--font-size-body);
    line-height: 1.5;
    color: var(--text-primary);
    background: var(--bg-card);
    resize: vertical;
    min-height: 4.5rem; /* 72px */
    transition: var(--transition-fast);
  }

  .form-textarea:focus {
    outline: var(--focus-ring);
    outline-offset: var(--focus-offset);
    border-color: var(--primary-green);
  }

  .form-textarea:focus:invalid {
    border-color: var(--error-red);
    outline-color: var(--error-red);
  }

  .form-textarea::placeholder {
    color: var(--text-muted);
  }

  .form-hint {
    display: block;
    margin-top: var(--space-xs);
    font-size: 0.75rem; /* 12px */
    color: var(--text-muted);
    line-height: 1.4;
    transition: color 0.2s ease;
  }

  /* Validation states */
  .form-textarea:invalid {
    border-color: rgba(211, 47, 47, 0.3);
  }

  .form-textarea:valid {
    border-color: rgba(56, 142, 60, 0.3);
  }

  /* Character count styling with CSS :has() selector */
  .form-group:has(.form-textarea:invalid) .form-hint {
    color: var(--error-red);
  }

  .form-group:has(.form-textarea:valid) .form-hint {
    color: var(--success-green);
  }

  /* Dark theme form elements */
  [data-theme='dark'] .form-textarea {
    background: var(--bg-card-dark);
    border-color: var(--border-color);
    color: var(--text-primary-dark);
  }

  [data-theme='dark'] .form-textarea::placeholder {
    color: var(--text-secondary-dark);
  }

  [data-theme='dark'] .reject-modal h3 {
    color: #f44336;
  }

  /* Form styling artist mode now handled in themes.less */

  /* =========================
   Rejection Reason Indicator
   ========================= */

  .rejection-indicator {
    margin-left: var(--space-sm);
    font-size: 0.875rem; /* 14px */
    cursor: help;
    filter: drop-shadow(0 0.0625rem 0.125rem rgba(0, 0, 0, 0.1));
    transition: transform 0.2s ease;
    position: relative;
    display: inline-block;
  }

  .rejection-indicator:hover {
    transform: scale(1.2);
    z-index: 9999; /* Match tooltip z-index for proper layering */
  }

  /* Custom Tooltip Styling */
  .tooltip {
    position: absolute;
    bottom: 100%;
    left: 50%;
    transform: translateX(-50%);
    background: var(--text-primary);
    color: var(--bg-card);
    padding: var(--space-md) var(--space-lg); /* Increased padding for better readability */
    border-radius: var(--radius-md);
    font-size: 0.8125rem; /* 13px - slightly larger for better readability */
    line-height: 1.5; /* Improved line spacing */
    white-space: normal;
    word-wrap: break-word;
    /* Dynamic width based on viewport and content */
    min-width: 12rem; /* 192px - minimum width */
    max-width: clamp(20rem, 40vw, 32rem); /* Responsive: 320px to 40% viewport width, max 512px */
    z-index: 9999; /* Ensure tooltip appears above all content, including scrollable containers */
    width: max-content; /* Expand to content width within constraints */
    box-shadow: 0 0.25rem 0.75rem rgba(0, 0, 0, 0.25);
    opacity: 0;
    visibility: hidden;
    transition: all 0.2s ease;
    margin-bottom: 0.5rem;
    pointer-events: none; /* Prevent tooltip from blocking mouse events */
    /* Better text handling for long content */
    text-align: left;
    hyphens: auto; /* Enable hyphenation for long words */
    overflow-wrap: break-word; /* Modern property for word breaking */
  }

  /* Smart positioning for tooltips near viewport edges */
  .tooltip-left-adjusted {
    left: 0 !important;
    transform: translateX(0) !important;
    margin-left: 1rem !important; /* Add some spacing from edge */
  }

  .tooltip-right-adjusted {
    left: auto !important;
    right: 0 !important;
    transform: translateX(0) !important;
    margin-right: 1rem !important; /* Add some spacing from edge */
  }

  /* CSS-only fallback positioning for first/last columns */
  .review-table td:first-child .tooltip {
    /* For items in first column, ensure tooltip doesn't go off-screen */
    left: 0;
    transform: translateX(0);
    margin-left: 1rem;
    max-width: calc(100vw - 2rem);
  }

  .review-table td:first-child .tooltip::after {
    left: 1rem;
    transform: translateX(0);
  }

  /* For last column, position to the left */
  .review-table td:last-child .tooltip {
    left: auto;
    right: 0;
    transform: translateX(0);
    margin-right: 1rem;
    max-width: calc(100vw - 2rem);
  }

  .review-table td:last-child .tooltip::after {
    left: auto;
    right: 1rem;
    transform: translateX(0);
  }

  /* Override for middle columns to maintain center positioning */
  .review-table td:nth-child(2) .tooltip,
  .review-table td:nth-child(3) .tooltip {
    left: 50%;
    right: auto;
    transform: translateX(-50%);
    margin-left: 0;
    margin-right: 0;
  }

  .review-table td:nth-child(2) .tooltip::after,
  .review-table td:nth-child(3) .tooltip::after {
    left: 50%;
    right: auto;
    transform: translateX(-50%);
  }

  .tooltip::after {
    content: '';
    position: absolute;
    top: 100%;
    left: 50%;
    transform: translateX(-50%);
    border: 0.375rem solid transparent;
    border-top-color: var(--text-primary);
  }

  /* Arrow adjustments for repositioned tooltips */
  .tooltip-left-adjusted::after {
    left: 1rem !important; /* Position arrow near left edge when tooltip is left-aligned */
    transform: translateX(0) !important;
  }

  .tooltip-right-adjusted::after {
    left: auto !important;
    right: 1rem !important; /* Position arrow near right edge when tooltip is right-aligned */
    transform: translateX(0) !important;
  }

  /* Tooltip positioning for first rows (show below instead of above) */
  .tooltip-below .tooltip {
    bottom: auto;
    top: 100%;
    margin-bottom: 0;
    margin-top: 0.5rem;
  }

  .tooltip-below .tooltip::after {
    top: auto;
    bottom: 100%;
    border-top-color: transparent;
    border-bottom-color: var(--text-primary);
  }

  /* Arrow adjustments for repositioned tooltips when shown below */
  .tooltip-below .tooltip-left-adjusted::after {
    left: 1rem;
    transform: translateX(0);
  }

  .tooltip-below .tooltip-right-adjusted::after {
    left: auto;
    right: 1rem;
    transform: translateX(0);
  }

  .rejection-indicator:hover .tooltip,
  .rejection-indicator:focus .tooltip {
    opacity: 1;
    visibility: visible;
    transform: translateX(-50%) translateY(-0.25rem);
  }

  .tooltip-below.rejection-indicator:hover .tooltip,
  .tooltip-below.rejection-indicator:focus .tooltip {
    transform: translateX(-50%) translateY(0.25rem);
  }

  /* Keyboard focus styling for rejection indicator */
  .rejection-indicator:focus {
    outline: 0.125rem solid var(--primary-green);
    outline-offset: 0.125rem;
    border-radius: 0.25rem;
  }

  .tooltip strong {
    font-weight: var(--font-weight-medium);
    color: var(--bg-card);
  }

  /* Rejection indicator artist mode styling now handled in themes.less */

  /* Enhanced tooltip for rejection reasons */
  .row-rejected:hover {
    position: relative;
  }

  /* Dark theme rejection indicator and tooltip */
  [data-theme='dark'] .rejection-indicator {
    filter: drop-shadow(0 0.0625rem 0.125rem rgba(255, 255, 255, 0.1));
  }

  [data-theme='dark'] .tooltip {
    background: var(--bg-card-dark);
    color: var(--text-primary-dark);
    border: 0.0625rem solid var(--border-color);
    box-shadow: 0 0.25rem 0.75rem rgba(0, 0, 0, 0.4);
    z-index: 9999; /* Ensure dark mode tooltip is also on top */
  }

  [data-theme='dark'] .tooltip::after {
    border-top-color: var(--bg-card-dark);
  }

  [data-theme='dark'] .tooltip-below .tooltip::after {
    border-top-color: transparent;
    border-bottom-color: var(--bg-card-dark);
  }

  /* Dark theme tooltip positioning adjustments */
  [data-theme='dark'] .tooltip-left-adjusted::after,
  [data-theme='dark'] .tooltip-below .tooltip-left-adjusted::after {
    left: 1rem;
    transform: translateX(0);
  }

  [data-theme='dark'] .tooltip-right-adjusted::after,
  [data-theme='dark'] .tooltip-below .tooltip-right-adjusted::after {
    left: auto;
    right: 1rem;
    transform: translateX(0);
  }

  [data-theme='dark'] .tooltip strong {
    color: var(--text-primary-dark);
  }

  /* Dark theme artist mode tooltip styling now handled in themes.less */

  /* =========================
   Footer
   ========================= */

  footer {
    margin-top: var(--space-xl);
    padding-top: var(--space-lg);
    border-top: 0.0625rem solid var(--border-color); /* 1px */
    text-align: center;
    color: var(--text-muted);
    font-size: 0.75rem; /* 12px */
  }

  /* =========================
   Toggle Buttons
   ========================= */

  .toggle-buttons {
    position: fixed;
    top: var(--space-lg);
    right: var(--space-lg);
    display: flex;
    gap: var(--space-sm);
    z-index: var(--z-index-toggle);
  }

  .theme-toggle,
  .artist-toggle {
    background: var(--bg-card);
    border: 0.0625rem solid var(--border-color); /* 1px */
    border-radius: var(--radius-pill);
    padding: var(--space-sm) var(--space-md);
    cursor: pointer;
    transition: var(--transition-fast);
    color: var(--text-primary);
    font-size: 1.125rem; /* 18px */
    min-width: 3rem; /* 48px */
    min-height: 3rem; /* 48px */
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .theme-toggle:hover,
  .artist-toggle:hover {
    background: var(--bg-hover);
    transform: translateY(-0.0625rem); /* -1px */
  }

  .theme-toggle:focus-visible,
  .artist-toggle:focus-visible {
    outline: var(--focus-ring);
    outline-offset: var(--focus-offset);
  }

  /* Artist mode styles are now handled in themes.less */
} /* End @layer components */

@layer utilities {
  /* =========================
   Utility Classes
   ========================= */

  /* Layout utilities */
  .flex {
    display: flex;
  }
  .flex-col {
    flex-direction: column;
  }
  .flex-row {
    flex-direction: row;
  }
  .items-center {
    align-items: center;
  }
  .justify-center {
    justify-content: center;
  }
  .justify-between {
    justify-content: space-between;
  }
  .gap-xs {
    gap: var(--space-xs);
  }
  .gap-sm {
    gap: var(--space-sm);
  }
  .gap-md {
    gap: var(--space-md);
  }
  .gap-lg {
    gap: var(--space-lg);
  }

  /* Spacing utilities */
  .p-xs {
    padding: var(--space-xs);
  }
  .p-sm {
    padding: var(--space-sm);
  }
  .p-md {
    padding: var(--space-md);
  }
  .p-lg {
    padding: var(--space-lg);
  }
  .m-auto {
    margin: auto;
  }
  .mt-auto {
    margin-top: auto;
  }

  /* Text utilities with logical properties */
  .text-center {
    text-align: center;
  }
  .text-start {
    text-align: start;
  } /* Logical property for i18n */
  .text-end {
    text-align: end;
  } /* Logical property for i18n */
  .font-bold {
    font-weight: var(--font-weight-bold);
  }
  .font-medium {
    font-weight: var(--font-weight-medium);
  }

  /* Visibility utilities */
  .sr-only {
    position: absolute !important;
    width: 0.0625rem;
    height: 0.0625rem;
    padding: 0;
    margin: -0.0625rem;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border: 0;
  }
  .hidden {
    display: none;
  }

  /* Container queries for responsive components */
  @container (min-width: 30rem) {
    .container-md\:flex-row {
      flex-direction: row;
    }
    .container-md\:gap-lg {
      gap: var(--space-lg);
    }
  }

  @container (min-width: 48rem) {
    .container-lg\:text-center {
      text-align: center;
    }
  }

  /* Logical properties for better internationalization */
  .margin-inline-auto {
    margin-inline: auto;
  }
  .padding-inline {
    padding-inline: var(--space-md);
  }
  .border-inline-start {
    border-inline-start: 0.0625rem solid var(--border-color);
  }
}

/* =========================
   Responsive Design
   ========================= */

@media (max-width: 48rem) {
  /* 768px */
  .app {
    padding: var(--space-md);
  }

  .file-controls {
    flex-direction: column;
    align-items: stretch;
  }

  .file-name {
    min-width: auto;
    text-align: center;
    order: -1;
  }

  .review-table {
    font-size: 0.75rem; /* 12px */
    table-layout: auto; /* Allow flexible layout on mobile */
  }

  .review-table th,
  .review-table td {
    padding: var(--space-sm);
  }

  /* Reset fixed column widths on mobile for better flexibility */
  .review-table th,
  .review-table td {
    width: auto;
  }

  /* Make actions column narrower on mobile */
  .review-table th:nth-child(4),
  .review-table td:nth-child(4) {
    width: auto;
    min-width: 5rem;
  }

  .search-input {
    font-size: 0.875rem; /* 14px */
    padding: 0.625rem 1.125rem 0.625rem 2.5rem; /* 10px 18px 10px 40px */
  }

  .search-container::before {
    left: 0.75rem; /* 12px */
    font-size: 0.875rem; /* 14px */
  }

  /* Responsive pagination */
  .pagination {
    gap: var(--space-xs);
    flex-direction: row;
  }

  .pagination-btn {
    padding: var(--space-xs) var(--space-sm);
    font-size: 0.875rem; /* 14px */
  }

  .pagination-number {
    width: 2rem; /* 32px */
    height: 2rem; /* 32px */
    font-size: 0.875rem; /* 14px */
  }

  /* Stack review stats on mobile */
  .review-stats {
    flex-direction: column;
    align-items: flex-start;
    gap: var(--space-xs);
  }

  /* Mobile status badges */
  .status-counts {
    gap: var(--space-xs);
  }

  .status-badge {
    font-size: 0.6875rem; /* 11px */
    padding: 0.1875rem 0.375rem; /* 3px 6px */
  }

  /* Mobile tooltip adjustments */
  .tooltip {
    /* More generous mobile sizing */
    min-width: 10rem; /* 160px - minimum on mobile */
    max-width: clamp(16rem, 80vw, 24rem); /* Responsive: 256px to 80% viewport width, max 384px */
    font-size: 0.75rem; /* 12px - maintain readability */
    padding: var(--space-sm) var(--space-md); /* Better padding for touch targets */
    line-height: 1.4; /* Slightly tighter for mobile */
  }

  .rejection-indicator {
    font-size: 0.75rem; /* 12px - slightly smaller on mobile */
  }

  /* Mobile tooltip positioning adjustments */
  @media (max-width: 48rem) {
    .tooltip-left-adjusted {
      left: 0.5rem; /* Smaller margin on mobile */
      max-width: calc(100vw - 1rem); /* Ensure it fits within viewport */
      margin-left: 0; /* Remove additional margin on mobile */
    }

    .tooltip-right-adjusted {
      right: 0.5rem; /* Smaller margin on mobile */
      max-width: calc(100vw - 1rem); /* Ensure it fits within viewport */
      margin-right: 0; /* Remove additional margin on mobile */
    }

    .tooltip-left-adjusted::after {
      left: 1rem; /* Adjust arrow position for mobile */
    }

    .tooltip-right-adjusted::after {
      right: 1rem; /* Adjust arrow position for mobile */
    }

    /* Mobile-specific first/last column positioning */
    .review-table td:first-child .tooltip {
      left: 0.5rem;
      margin-left: 0;
      max-width: calc(100vw - 1rem);
    }

    .review-table td:last-child .tooltip {
      right: 0.5rem;
      margin-right: 0;
      max-width: calc(100vw - 1rem);
    }

    .review-table td:first-child .tooltip::after {
      left: 1rem;
    }

    .review-table td:last-child .tooltip::after {
      right: 1rem;
    }
  }

  /* Artist mode mobile adjustments now handled in themes.less */
}

@media (max-width: 30rem) {
  /* 480px */
  header h1 {
    font-size: 1.25rem; /* 20px */
  }

  .section-title {
    font-size: 1rem; /* 16px */
  }

  .btn {
    font-size: var(--btn-font-size-mobile);
    padding: var(--btn-padding-mobile);
  }
} /* End responsive design */

@layer accessibility {
  /* =========================
   Enhanced Accessibility
   ========================= */

  @media (prefers-reduced-motion: reduce) {
    * {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
    }
  }

  /* High contrast mode support */
  @media (prefers-contrast: high) {
    .btn {
      border: 0.125rem solid currentColor; /* 2px */
    }

    .section {
      border-width: 0.125rem; /* 2px */
    }
  }

  /* Forced colors mode support (Windows High Contrast) */
  @media (forced-colors: active) {
    .btn {
      border: 0.125rem solid ButtonText;
      background: ButtonFace;
      color: ButtonText;
    }

    .btn:hover {
      background: Highlight;
      color: HighlightText;
    }

    .section {
      border: 0.125rem solid CanvasText;
      background: Canvas;
    }

    .modal-backdrop {
      background: rgba(0, 0, 0, 0.8);
    }
  }

  /* Enhanced focus indicators */
  @media (prefers-reduced-motion: no-preference) {
    :focus-visible {
      outline: var(--focus-ring);
      outline-offset: var(--focus-offset);
      transition: outline-offset 0.2s ease;
    }

    :focus-visible:not(:focus-visible) {
      outline-offset: 0;
    }
  }

  /* Skip link for keyboard navigation */
  .skip-link {
    position: absolute;
    top: -2.5rem;
    left: 0.5rem;
    background: var(--primary-green);
    color: white;
    padding: 0.5rem 1rem;
    text-decoration: none;
    border-radius: var(--radius-sm);
    z-index: 1000;
    transition: top 0.3s;
  }

  .skip-link:focus {
    top: 0.5rem;
  }

  /* Enhanced error announcements - better for screen readers */
  [aria-live='assertive'] {
    font-weight: var(--font-weight-medium);
  }

  /* Better visual hierarchy for screen readers */
  .sr-only {
    position: absolute;
    width: 0.0625rem;
    height: 0.0625rem;
    padding: 0;
    margin: -0.0625rem;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border: 0;
  }

  /* Respect user's color scheme preference */
  @media (prefers-color-scheme: dark) {
    :root:not([data-theme='light']) {
      color-scheme: dark;
    }
  }

  @media (prefers-color-scheme: light) {
    :root:not([data-theme='dark']) {
      color-scheme: light;
    }
  }

  /* Print styles */
  @media print {
    .toggle-buttons,
    .btn.approve,
    .btn.reject {
      display: none;
    }

    /* Artist mode print styles handled in themes.less */

    .section {
      break-inside: avoid;
      border: 0.0625rem solid #000;
      box-shadow: none;
    }

    body {
      font-size: 12pt;
      line-height: 1.4;
    }

    .review-table {
      font-size: 10pt;
    }
  }
} /* End @layer accessibility */

@layer animations {
  /* =========================
   Performance-Optimized Animations
   ========================= */

  /* GPU-accelerated animations */
  @keyframes gentle-float {
    0%,
    100% {
      transform: translate3d(0, 0, 0) rotate(var(--artist-rotate-slight));
    }
    50% {
      transform: translate3d(0, -0.125rem, 0) rotate(var(--artist-rotate-slight));
    }
  }

  /* Feature queries for advanced CSS support */
  @supports (backdrop-filter: blur(10px)) {
    .modal-backdrop {
      backdrop-filter: blur(0.625rem);
      background: rgba(0, 0, 0, 0.3);
    }
  }

  @supports (color-mix(in srgb, var(--primary-green) 80%, transparent)) {
    .btn:hover {
      background-color: color-mix(in srgb, var(--primary-green) 90%, white);
    }
  }

  /* View transitions API support */
  @supports (view-transition-name: auto) {
    .section {
      view-transition-name: auto;
    }

    .modal {
      view-transition-name: modal;
    }
  }

  /* Keep table as standard table for proper alignment */
  /* Table layout is already set above with column width definitions */

  /* Optional: Future-ready grid layout (when subgrid is stable) */
  /* @supports (grid-template-rows: subgrid) {
  .review-table {
    display: grid;
    grid-template-columns: 1fr 1fr 1fr auto;
  }
  
  .review-table tbody {
    grid-template-rows: subgrid;
  }
} */
} /* End @layer animations */
